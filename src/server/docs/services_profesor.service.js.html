<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>services/profesor.service.js - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="AdminController.html">AdminController</a></li><li><a href="AdminModel.html">AdminModel</a></li><li><a href="AdminService.html">AdminService</a></li><li><a href="AulaController.html">AulaController</a></li><li><a href="AulaModel.html">AulaModel</a></li><li><a href="AulaService.html">AulaService</a></li><li><a href="CoordinadorController.html">CoordinadorController</a></li><li><a href="CoordinadorService.html">CoordinadorService</a></li><li><a href="CurricularController.html">CurricularController</a></li><li><a href="CurricularModel.html">CurricularModel</a></li><li><a href="CurricularService.html">CurricularService</a></li><li><a href="DocumentServices.html">DocumentServices</a><ul class='methods'><li data-type='method'><a href="DocumentServices.html#.crearCeldaEstilizada">crearCeldaEstilizada</a></li><li data-type='method'><a href="DocumentServices.html#.crearDocumentoHorario">crearDocumentoHorario</a></li><li data-type='method'><a href="DocumentServices.html#.crearFilaInformacion">crearFilaInformacion</a></li><li data-type='method'><a href="DocumentServices.html#.crearFilasTabla">crearFilasTabla</a></li><li data-type='method'><a href="DocumentServices.html#.crearParrafoEstilizado">crearParrafoEstilizado</a></li><li data-type='method'><a href="DocumentServices.html#.crearTextoEstilizado">crearTextoEstilizado</a></li><li data-type='method'><a href="DocumentServices.html#.generarDocumentoHorario">generarDocumentoHorario</a></li><li data-type='method'><a href="DocumentServices.html#.generarHorasDisponibles">generarHorasDisponibles</a></li><li data-type='method'><a href="DocumentServices.html#.procesarHorario">procesarHorario</a></li><li data-type='method'><a href="DocumentServices.html#.traerLogoMarcaAgua">traerLogoMarcaAgua</a></li></ul></li><li><a href="EmailService.html">EmailService</a></li><li><a href="FormatterResponseController.html">FormatterResponseController</a></li><li><a href="FormatterResponseModel.html">FormatterResponseModel</a></li><li><a href="FormatterResponseService.html">FormatterResponseService</a></li><li><a href="HorarioController.html">HorarioController</a></li><li><a href="HorarioService.html">HorarioService</a></li><li><a href="NotificationController.html">NotificationController</a></li><li><a href="ProfesorController.html">ProfesorController</a></li><li><a href="ProfesorModel.html">ProfesorModel</a></li><li><a href="ProfesorService.html">ProfesorService</a></li><li><a href="SedeController.html">SedeController</a></li><li><a href="SedeModel.html">SedeModel</a></li><li><a href="SedeService.html">SedeService</a></li><li><a href="SystemController.html">SystemController</a></li><li><a href="SystemModel.html">SystemModel</a></li><li><a href="UserController.html">UserController</a></li><li><a href="UserModel.html">UserModel</a></li><li><a href="UserService.html">UserService</a></li><li><a href="ValidationService.html">ValidationService</a></li><li><a href="module.exports_module.exports.html">exports</a></li></ul><h3>Modules</h3><ul><li><a href="module-CoordinadorModel.html">CoordinadorModel</a><ul class='methods'><li data-type='method'><a href="module-CoordinadorModel.html#.actualizarCoordinador">actualizarCoordinador</a></li><li data-type='method'><a href="module-CoordinadorModel.html#.asignarCoordinador">asignarCoordinador</a></li><li data-type='method'><a href="module-CoordinadorModel.html#.destituirCoordinador">destituirCoordinador</a></li><li data-type='method'><a href="module-CoordinadorModel.html#.obtenerCoordinador">obtenerCoordinador</a></li><li data-type='method'><a href="module-CoordinadorModel.html#.obtenerCoordinadorPorId">obtenerCoordinadorPorId</a></li><li data-type='method'><a href="module-CoordinadorModel.html#.obtenerCoordinadorPorPnf">obtenerCoordinadorPorPnf</a></li><li data-type='method'><a href="module-CoordinadorModel.html#.obtenerCoordinadoresActivos">obtenerCoordinadoresActivos</a></li><li data-type='method'><a href="module-CoordinadorModel.html#.obtenerDatosCoordinadorCompletos">obtenerDatosCoordinadorCompletos</a></li><li data-type='method'><a href="module-CoordinadorModel.html#.obtenerHistorialCoordinador">obtenerHistorialCoordinador</a></li><li data-type='method'><a href="module-CoordinadorModel.html#.obtenerHistorialDestituciones">obtenerHistorialDestituciones</a></li><li data-type='method'><a href="module-CoordinadorModel.html#.obtenerTodos">obtenerTodos</a></li><li data-type='method'><a href="module-CoordinadorModel.html#.reasignarCoordinador">reasignarCoordinador</a></li><li data-type='method'><a href="module-CoordinadorModel.html#.restituirCoordinador">restituirCoordinador</a></li><li data-type='method'><a href="module-CoordinadorModel.html#.validarCoordinadorActivo">validarCoordinadorActivo</a></li></ul></li><li><a href="module-CurricularRouter.html">CurricularRouter</a></li><li><a href="module-passwordUtils.html">passwordUtils</a><ul class='methods'><li data-type='method'><a href="module-passwordUtils.html#~comparePassword">comparePassword</a></li><li data-type='method'><a href="module-passwordUtils.html#~generarPassword">generarPassword</a></li><li data-type='method'><a href="module-passwordUtils.html#~hashPassword">hashPassword</a></li></ul></li></ul><h3>Global</h3><ul><li><a href="global.html">CrearSecciones</a></li><li><a href="global.html#DELETE/admins/:id">DELETE /admins/:id</a></li><li><a href="global.html#DELETE/aulas/:id">DELETE /aulas/:id</a></li><li><a href="global.html#DELETE/coordinadores/:id/destituir">DELETE /coordinadores/:id/destituir</a></li><li><a href="global.html#DELETE/horarios/:id">DELETE /horarios/:id</a></li><li><a href="global.html#DELETE/profesores/:id">DELETE /profesores/:id</a></li><li><a href="global.html#DELETE/profesores/:id_profesor/disponibilidad/:id_disponibilidad">DELETE /profesores/:id_profesor/disponibilidad/:id_disponibilidad</a></li><li><a href="global.html#DELETE/sedes/:id">DELETE /sedes/:id</a></li><li><a href="global.html#DELETE/system/backups/:backupFileName">DELETE /system/backups/:backupFileName</a></li><li><a href="global.html#DELETE/system/backups/cleanup">DELETE /system/backups/cleanup</a></li><li><a href="global.html#DELETE/user/:id_usuario/desactivar">DELETE /user/:id_usuario/desactivar</a></li><li><a href="global.html#EMAIL_CONFIG">EMAIL_CONFIG</a></li><li><a href="global.html#EnviarTokenEmail">EnviarTokenEmail</a></li><li><a href="global.html#GET/admin/logs">GET /admin/logs</a></li><li><a href="global.html#GET/admin/profile">GET /admin/profile</a></li><li><a href="global.html#GET/admin/reports">GET /admin/reports</a></li><li><a href="global.html#GET/admin/stats">GET /admin/stats</a></li><li><a href="global.html#GET/admins">GET /admins</a></li><li><a href="global.html#GET/admins/search">GET /admins/search</a></li><li><a href="global.html#GET/api/aulas">GET /api/aulas</a></li><li><a href="global.html#GET/api/profesores">GET /api/profesores</a></li><li><a href="global.html#GET/api/system/backups">GET /api/system/backups</a></li><li><a href="global.html#GET/api/system/estadisticas">GET /api/system/estadisticas</a></li><li><a href="global.html#GET/api/system/metricas">GET /api/system/metricas</a></li><li><a href="global.html#GET/api/system/status">GET /api/system/status</a></li><li><a href="global.html#GET/auditory/system">GET /auditory/system</a></li><li><a href="global.html#GET/aulas">GET /aulas</a></li><li><a href="global.html#GET/aulas/:id">GET /aulas/:id</a></li><li><a href="global.html#GET/aulas/pnf/:codigoPNF">GET /aulas/pnf/:codigoPNF</a></li><li><a href="global.html#GET/aulas/sede/:sede">GET /aulas/sede/:sede</a></li><li><a href="global.html#GET/aulas/tipo/:tipo">GET /aulas/tipo/:tipo</a></li><li><a href="global.html#GET/auth/verify">GET /auth/verify</a></li><li><a href="global.html#GET/catalogos/areas-conocimiento">GET /catalogos/areas-conocimiento</a></li><li><a href="global.html#GET/catalogos/posgrados">GET /catalogos/posgrados</a></li><li><a href="global.html#GET/catalogos/pregrados">GET /catalogos/pregrados</a></li><li><a href="global.html#GET/coordinadores">GET /coordinadores</a></li><li><a href="global.html#GET/coordinadores/:id">GET /coordinadores/:id</a></li><li><a href="global.html#GET/coordinadores/:id/historial-destituciones">GET /coordinadores/:id/historial-destituciones</a></li><li><a href="global.html#GET/coordinadores/destituidos">GET /coordinadores/destituidos</a></li><li><a href="global.html#GET/exportar/seccion/:id_seccion">GET /exportar/seccion/:id_seccion</a></li><li><a href="global.html#GET/horarios/aula/:id_aula">GET /horarios/aula/:id_aula</a></li><li><a href="global.html#GET/horarios/profesor/:id_profesor">GET /horarios/profesor/:id_profesor</a></li><li><a href="global.html#GET/horarios/seccion/:id_seccion">GET /horarios/seccion/:id_seccion</a></li><li><a href="global.html#GET/notifications">GET /notifications</a></li><li><a href="global.html#GET/profesores">GET /profesores</a></li><li><a href="global.html#GET/profesores/:id">GET /profesores/:id</a></li><li><a href="global.html#GET/profesores/:id/imagen">GET /profesores/:id/imagen</a></li><li><a href="global.html#GET/profesores/search">GET /profesores/search</a></li><li><a href="global.html#GET/profile">GET /profile</a></li><li><a href="global.html#GET/sedes">GET /sedes</a></li><li><a href="global.html#GET/sedes/:id">GET /sedes/:id</a></li><li><a href="global.html#GET/system/backups">GET /system/backups</a></li><li><a href="global.html#GET/system/backups/download/:backupFileName">GET /system/backups/download/:backupFileName</a></li><li><a href="global.html#GET/system/estado">GET /system/estado</a></li><li><a href="global.html#GET/system/info">GET /system/info</a></li><li><a href="global.html#GET/system/logs">GET /system/logs</a></li><li><a href="global.html#GET/system/mapa-calor/horarios">GET /system/mapa-calor/horarios</a></li><li><a href="global.html#GET/system/metricas/academicas">GET /system/metricas/academicas</a></li><li><a href="global.html#GET/system/metricas/sistema">GET /system/metricas/sistema</a></li><li><a href="global.html#GET/system/reportes/estadisticas">GET /system/reportes/estadisticas</a></li><li><a href="global.html">GuardarTokenEmail</a></li><li><a href="global.html#PATCH/admins/:id/rol">PATCH /admins/:id/rol</a></li><li><a href="global.html#POST/admins">POST /admins</a></li><li><a href="global.html#POST/aulas">POST /aulas</a></li><li><a href="global.html#POST/aulas/to/horarios">POST /aulas/to/horarios</a></li><li><a href="global.html#POST/auth/login">POST /auth/login</a></li><li><a href="global.html#POST/catalogos/areas-conocimiento">POST /catalogos/areas-conocimiento</a></li><li><a href="global.html#POST/catalogos/posgrados">POST /catalogos/posgrados</a></li><li><a href="global.html#POST/catalogos/pregrados">POST /catalogos/pregrados</a></li><li><a href="global.html#POST/coordinadores">POST /coordinadores</a></li><li><a href="global.html#POST/coordinadores/:id/restitur">POST /coordinadores/:id/restitur</a></li><li><a href="global.html#POST/horarios">POST /horarios</a></li><li><a href="global.html#POST/profesores">POST /profesores</a></li><li><a href="global.html#POST/profesores/:id/disponibilidad">POST /profesores/:id/disponibilidad</a></li><li><a href="global.html#POST/profesores/:id/reingresar">POST /profesores/:id/reingresar</a></li><li><a href="global.html#POST/profesores/to/seccion/:id_seccion">POST /profesores/to/seccion/:id_seccion</a></li><li><a href="global.html#POST/sedes">POST /sedes</a></li><li><a href="global.html#POST/system/backup">POST /system/backup</a></li><li><a href="global.html#POST/system/backup/manual">POST /system/backup/manual</a></li><li><a href="global.html#POST/system/restore">POST /system/restore</a></li><li><a href="global.html#PUT/admin/profile">PUT /admin/profile</a></li><li><a href="global.html#PUT/admins/:id">PUT /admins/:id</a></li><li><a href="global.html#PUT/aulas/:id">PUT /aulas/:id</a></li><li><a href="global.html#PUT/auth/password">PUT /auth/password</a></li><li><a href="global.html#PUT/coordinadores/:cedula/reasignar-pnf">PUT /coordinadores/:cedula/reasignar-pnf</a></li><li><a href="global.html#PUT/coordinadores/:id">PUT /coordinadores/:id</a></li><li><a href="global.html#PUT/horarios/:id">PUT /horarios/:id</a></li><li><a href="global.html#PUT/profesores/:id">PUT /profesores/:id</a></li><li><a href="global.html#PUT/profesores/:id_profesor/disponibilidad">PUT /profesores/:id_profesor/disponibilidad</a></li><li><a href="global.html#PUT/sedes/:id">PUT /sedes/:id</a></li><li><a href="global.html#PUT/user/:id_usuario/activar">PUT /user/:id_usuario/activar</a></li><li><a href="global.html">VerificarToken</a></li><li><a href="global.html">activar</a></li><li><a href="global.html">activarUsuario</a></li><li><a href="global.html">actualizar</a></li><li><a href="global.html">actualizarAdmin</a></li><li><a href="global.html">actualizarAula</a></li><li><a href="global.html">actualizarContrase√±aYLimpiarToken</a></li><li><a href="global.html">actualizarCoordinador</a></li><li><a href="global.html">actualizarDescripcionTrayecto</a></li><li><a href="global.html">actualizarDisponibilidad</a></li><li><a href="global.html#actualizarHorario">actualizarHorario</a></li><li><a href="global.html">actualizarPNF</a></li><li><a href="global.html">actualizarPerfil</a></li><li><a href="global.html#actualizarProfesor">actualizarProfesor</a></li><li><a href="global.html">actualizarSede</a></li><li><a href="global.html">actualizarUltimoAcceso</a></li><li><a href="global.html">actualizarUnidadCurricular</a></li><li><a href="global.html#agregarRolDestinatario">agregarRolDestinatario</a></li><li><a href="global.html#agregarUsuarioDestinatario">agregarUsuarioDestinatario</a></li><li><a href="global.html#asegurarStringEnMinusculas">asegurarStringEnMinusculas</a></li><li><a href="global.html">asignacionTurnoSeccion</a></li><li><a href="global.html">asignarCoordinador</a></li><li><a href="global.html">asignarTurnoSeccion</a></li><li><a href="global.html">buscar</a></li><li><a href="global.html">buscarAdmin</a></li><li><a href="global.html">buscarPorEmail</a></li><li><a href="global.html">buscarPorId</a></li><li><a href="global.html#buscarProfesor">buscarProfesor</a></li><li><a href="global.html">cambiarContrase√±a</a></li><li><a href="global.html">cambiarRol</a></li><li><a href="global.html">cambiarRolAdmin</a></li><li><a href="global.html">cerrarSesion</a></li><li><a href="global.html#closeSession">closeSession</a></li><li><a href="global.html">conflict</a></li><li><a href="global.html#connectDB">connectDB</a></li><li><a href="global.html">contarPorRolYEstado</a></li><li><a href="global.html#corsOptions">corsOptions</a></li><li><a href="global.html">crear</a></li><li><a href="global.html">crearAreaConocimiento</a></li><li><a href="global.html">crearDisponibilidad</a></li><li><a href="global.html#crearNotificacionCompleta">crearNotificacionCompleta</a></li><li><a href="global.html#crearNotificacionIndividual">crearNotificacionIndividual</a></li><li><a href="global.html#crearNotificacionMasiva">crearNotificacionMasiva</a></li><li><a href="global.html">crearPosgrado</a></li><li><a href="global.html">crearPregrado</a></li><li><a href="global.html">crearRespaldo</a></li><li><a href="global.html">crearSecciones</a></li><li><a href="global.html#crearSede">crearSede</a></li><li><a href="global.html#createValidationResponse">createValidationResponse</a></li><li><a href="global.html">created</a></li><li><a href="global.html">desactivar</a></li><li><a href="global.html">desactivarAdmin</a></li><li><a href="global.html">desactivarUsuario</a></li><li><a href="global.html#descargarRespaldo">descargarRespaldo</a></li><li><a href="global.html#destituirProfesor">destituirProfesor</a></li><li><a href="global.html#disconnectDB">disconnectDB</a></li><li><a href="global.html">eliminar</a></li><li><a href="global.html">eliminarAula</a></li><li><a href="global.html">eliminarCoordinador</a></li><li><a href="global.html">eliminarDisponibilidad</a></li><li><a href="global.html#eliminarHorario">eliminarHorario</a></li><li><a href="global.html">eliminarPnf</a></li><li><a href="global.html">eliminarRespaldo</a></li><li><a href="global.html">eliminarSede</a></li><li><a href="global.html">eliminarUnidadCurricular</a></li><li><a href="global.html#enviarEmail">enviarEmail</a></li><li><a href="global.html#enviarEmailMultiple">enviarEmailMultiple</a></li><li><a href="global.html">error</a></li><li><a href="global.html#exportarHorarioWord">exportarHorarioWord</a></li><li><a href="global.html">extractData</a></li><li><a href="global.html">extractError</a></li><li><a href="global.html">filtrarPorEstado</a></li><li><a href="global.html">filtrarPorRol</a></li><li><a href="global.html">filtrarPorSede</a></li><li><a href="global.html">filtrarPorTipo</a></li><li><a href="global.html">forbidden</a></li><li><a href="global.html">formatValidationErrors</a></li><li><a href="global.html">fromDatabaseResponse</a></li><li><a href="global.html#generarDocumentoHorario">generarDocumentoHorario</a></li><li><a href="global.html#generateEmailTemplate">generateEmailTemplate</a></li><li><a href="global.html#get/auth/logout">get /auth/logout</a></li><li><a href="global.html#getCookie">getCookie</a></li><li><a href="global.html">getDefaultTitle</a></li><li><a href="global.html">getErrorCode</a></li><li><a href="global.html#getFilterCondition">getFilterCondition</a></li><li><a href="global.html#getImageProfesorDirect">getImageProfesorDirect</a></li><li><a href="global.html">getMinimalFallback</a></li><li><a href="global.html">getProfile</a></li><li><a href="global.html">getTranslation</a></li><li><a href="global.html">isError</a></li><li><a href="global.html">isSuccess</a></li><li><a href="global.html#joinRoleRooms">joinRoleRooms</a></li><li><a href="global.html#jsonSyntaxErrorHandler">jsonSyntaxErrorHandler</a></li><li><a href="global.html">limpiarRespaldosAntiguos</a></li><li><a href="global.html">listarCoordinadores</a></li><li><a href="global.html">listarCoordinadoresDestituidos</a></li><li><a href="global.html">listarRespaldos</a></li><li><a href="global.html#listenNotifications">listenNotifications</a></li><li><a href="global.html#loadEnv">loadEnv</a></li><li><a href="global.html">login</a></li><li><a href="global.html">loginUser</a></li><li><a href="global.html">manejarServicio</a></li><li><a href="global.html">marcarComoLeida</a></li><li><a href="global.html#markAsRead">markAsRead</a></li><li><a href="global.html#middlewareAuth">middlewareAuth</a></li><li><a href="global.html">mostrarAdmin</a></li><li><a href="global.html#mostrarAreasConocimiento">mostrarAreasConocimiento</a></li><li><a href="global.html#mostrarAulaCambiarHorario">mostrarAulaCambiarHorario</a></li><li><a href="global.html">mostrarAulas</a></li><li><a href="global.html#mostrarAulasParaHorario">mostrarAulasParaHorario</a></li><li><a href="global.html">mostrarDisponibilidad</a></li><li><a href="global.html#mostrarHorariosPorAula">mostrarHorariosPorAula</a></li><li><a href="global.html#mostrarHorariosPorSeccion">mostrarHorariosPorSeccion</a></li><li><a href="global.html#mostrarHorariosProfesores">mostrarHorariosProfesores</a></li><li><a href="global.html">mostrarLineasInvestigacion</a></li><li><a href="global.html">mostrarNotificacion</a></li><li><a href="global.html">mostrarPNF</a></li><li><a href="global.html#mostrarPosGrados">mostrarPosGrados</a></li><li><a href="global.html#mostrarPreGrados">mostrarPreGrados</a></li><li><a href="global.html#mostrarProfesor">mostrarProfesor</a></li><li><a href="global.html#mostrarProfesorAPI">mostrarProfesorAPI</a></li><li><a href="global.html#mostrarProfesorCambiarHorario">mostrarProfesorCambiarHorario</a></li><li><a href="global.html">mostrarProfesoresEliminados</a></li><li><a href="global.html#mostrarProfesoresParaHorario">mostrarProfesoresParaHorario</a></li><li><a href="global.html">mostrarSecciones</a></li><li><a href="global.html">mostrarSeccionesByPnfAndValueTrayecto</a></li><li><a href="global.html">mostrarSeccionesByPnfAndValueUnidadCurricular</a></li><li><a href="global.html">mostrarSedes</a></li><li><a href="global.html">mostrarTrayectos</a></li><li><a href="global.html">mostrarTurnos</a></li><li><a href="global.html">mostrarUnidadesCurriculares</a></li><li><a href="global.html">notFound</a></li><li><a href="global.html">obtenerAdminPorId</a></li><li><a href="global.html">obtenerAdminsPorEstado</a></li><li><a href="global.html">obtenerAdminsPorRol</a></li><li><a href="global.html">obtenerAreasConocimiento</a></li><li><a href="global.html#obtenerAuditoria">obtenerAuditoria</a></li><li><a href="global.html">obtenerAuditoriaCompleta</a></li><li><a href="global.html">obtenerAulaPorId</a></li><li><a href="global.html">obtenerAulasDisponibles</a></li><li><a href="global.html">obtenerAulasPorPnf</a></li><li><a href="global.html">obtenerAulasPorSede</a></li><li><a href="global.html">obtenerAulasPorTipo</a></li><li><a href="global.html">obtenerConFiltros</a></li><li><a href="global.html">obtenerCoordinador</a></li><li><a href="global.html">obtenerEstadoSistema</a></li><li><a href="global.html">obtenerHistorialDestituciones</a></li><li><a href="global.html#obtenerHorariosPorAula">obtenerHorariosPorAula</a></li><li><a href="global.html#obtenerHorariosPorProfesor">obtenerHorariosPorProfesor</a></li><li><a href="global.html#obtenerHorariosPorSeccion">obtenerHorariosPorSeccion</a></li><li><a href="global.html#obtenerIdUSerProfesor">obtenerIdUSerProfesor</a></li><li><a href="global.html">obtenerImagen</a></li><li><a href="global.html#obtenerInformacionSistema">obtenerInformacionSistema</a></li><li><a href="global.html#obtenerLogsSistema">obtenerLogsSistema</a></li><li><a href="global.html">obtenerMapaCalorHorarios</a></li><li><a href="global.html#obtenerMapaCalorOcupacion">obtenerMapaCalorOcupacion</a></li><li><a href="global.html">obtenerMetricasAcademicas</a></li><li><a href="global.html">obtenerMetricasSistema</a></li><li><a href="global.html">obtenerPerfil</a></li><li><a href="global.html#obtenerPorAula">obtenerPorAula</a></li><li><a href="global.html#obtenerPorId">obtenerPorId</a></li><li><a href="global.html#obtenerPorProfesor">obtenerPorProfesor</a></li><li><a href="global.html#obtenerPorSeccion">obtenerPorSeccion</a></li><li><a href="global.html">obtenerPosgrados</a></li><li><a href="global.html">obtenerPregrados</a></li><li><a href="global.html#obtenerProfesoresDisponibles">obtenerProfesoresDisponibles</a></li><li><a href="global.html">obtenerReportesEstadisticas</a></li><li><a href="global.html">obtenerRolesDisponibles</a></li><li><a href="global.html">obtenerSedePorId</a></li><li><a href="global.html">obtenerTodas</a></li><li><a href="global.html">obtenerTodos</a></li><li><a href="global.html">obtenerUnidadCurricularPorId</a></li><li><a href="global.html">obtenerUsuarioPorEmail</a></li><li><a href="global.html">obtenerUsuarioPorEmailConToken</a></li><li><a href="global.html">obtenerUsuarioPorId</a></li><li><a href="global.html">paginated</a></li><li><a href="global.html#parseJSONField">parseJSONField</a></li><li><a href="global.html#post/auth/logout">post /auth/logout</a></li><li><a href="global.html">quitarRol</a></li><li><a href="global.html">reactivarPnf</a></li><li><a href="global.html">reasignarCoordinador</a></li><li><a href="global.html#registerAreaConocimiento">registerAreaConocimiento</a></li><li><a href="global.html#registerAula">registerAula</a></li><li><a href="global.html#registerPosGrado">registerPosGrado</a></li><li><a href="global.html#registerPreGrado">registerPreGrado</a></li><li><a href="global.html#registerSede">registerSede</a></li><li><a href="global.html">registrarAdmin</a></li><li><a href="global.html">registrarAula</a></li><li><a href="global.html#registrarHorario">registrarHorario</a></li><li><a href="global.html">registrarLineaInvestigacion</a></li><li><a href="global.html">registrarLineasInvestigacion</a></li><li><a href="global.html">registrarPNF</a></li><li><a href="global.html#registrarProfesor">registrarProfesor</a></li><li><a href="global.html">registrarSede</a></li><li><a href="global.html">registrarUnidadCurricular</a></li><li><a href="global.html#regitrarPNF">regitrarPNF</a></li><li><a href="global.html#regitrarUnidadCurricular">regitrarUnidadCurricular</a></li><li><a href="global.html">reingresar</a></li><li><a href="global.html">reingresoProfesor</a></li><li><a href="global.html#reportesEstadisticas">reportesEstadisticas</a></li><li><a href="global.html">respuestaDatos</a></li><li><a href="global.html">respuestaError</a></li><li><a href="global.html">respuestaExito</a></li><li><a href="global.html">respuestaPaginada</a></li><li><a href="global.html">respuestaPostgres</a></li><li><a href="global.html">respuestaServicio</a></li><li><a href="global.html">respuestaSuccess</a></li><li><a href="global.html">respuestaValidacionError</a></li><li><a href="global.html">restaurarRespaldo</a></li><li><a href="global.html">restituirCoordinador</a></li><li><a href="global.html#searchNotificationDestinatario">searchNotificationDestinatario</a></li><li><a href="global.html#searchNotificationGlobales">searchNotificationGlobales</a></li><li><a href="global.html#searchNotificationRoles">searchNotificationRoles</a></li><li><a href="global.html#searchNotificationUser">searchNotificationUser</a></li><li><a href="global.html#searchNotifications">searchNotifications</a></li><li><a href="global.html#securityMiddleware">securityMiddleware</a></li><li><a href="global.html#sendToGlobals">sendToGlobals</a></li><li><a href="global.html#sendToRoles">sendToRoles</a></li><li><a href="global.html#sendToUser">sendToUser</a></li><li><a href="global.html#socketAuth">socketAuth</a></li><li><a href="global.html#storage">storage</a></li><li><a href="global.html">success</a></li><li><a href="global.html">unauthorized</a></li><li><a href="global.html">updateProfile</a></li><li><a href="global.html">validacionesComunes</a></li><li><a href="global.html#validarFormatoEmail">validarFormatoEmail</a></li><li><a href="global.html#validateAdmins">validateAdmins</a></li><li><a href="global.html#validateAreaConocimiento">validateAreaConocimiento</a></li><li><a href="global.html#validateAsignacionCoordinador">validateAsignacionCoordinador</a></li><li><a href="global.html#validateAula">validateAula</a></li><li><a href="global.html#validateContrasenia">validateContrasenia</a></li><li><a href="global.html#validateCoordinador">validateCoordinador</a></li><li><a href="global.html">validateCreacionSecciones</a></li><li><a href="global.html#validateDestitucion">validateDestitucion</a></li><li><a href="global.html#validateDisponibilidadDocente">validateDisponibilidadDocente</a></li><li><a href="global.html#validateHorario">validateHorario</a></li><li><a href="global.html#validateId">validateId</a></li><li><a href="global.html#validateLineaInvestigacion">validateLineaInvestigacion</a></li><li><a href="global.html#validateLogin">validateLogin</a></li><li><a href="global.html">validateNuevaAreaConocimiento</a></li><li><a href="global.html">validateNuevoPosgrado</a></li><li><a href="global.html">validateNuevoPregrado</a></li><li><a href="global.html#validatePartialAdmins">validatePartialAdmins</a></li><li><a href="global.html#validatePartialAreaConocimiento">validatePartialAreaConocimiento</a></li><li><a href="global.html#validatePartialAula">validatePartialAula</a></li><li><a href="global.html#validatePartialCoordinador">validatePartialCoordinador</a></li><li><a href="global.html#validatePartialDestitucion">validatePartialDestitucion</a></li><li><a href="global.html#validatePartialDisponibilidadDocente">validatePartialDisponibilidadDocente</a></li><li><a href="global.html#validatePartialHorario">validatePartialHorario</a></li><li><a href="global.html#validatePartialLogin">validatePartialLogin</a></li><li><a href="global.html#validatePartialPnf">validatePartialPnf</a></li><li><a href="global.html#validatePartialPosgrado">validatePartialPosgrado</a></li><li><a href="global.html#validatePartialPregrado">validatePartialPregrado</a></li><li><a href="global.html#validatePartialProfesor">validatePartialProfesor</a></li><li><a href="global.html#validatePartialSeccion">validatePartialSeccion</a></li><li><a href="global.html#validatePartialSede">validatePartialSede</a></li><li><a href="global.html#validatePartialUnidadCurricular">validatePartialUnidadCurricular</a></li><li><a href="global.html#validatePartialUser">validatePartialUser</a></li><li><a href="global.html#validatePnf">validatePnf</a></li><li><a href="global.html#validatePosgrado">validatePosgrado</a></li><li><a href="global.html#validatePregrado">validatePregrado</a></li><li><a href="global.html#validateProfesor">validateProfesor</a></li><li><a href="global.html#validateQueryParams">validateQueryParams</a></li><li><a href="global.html#validateRecoveryPassword">validateRecoveryPassword</a></li><li><a href="global.html#validateReingreso">validateReingreso</a></li><li><a href="global.html#validateRequiredFields">validateRequiredFields</a></li><li><a href="global.html#validateSeccion">validateSeccion</a></li><li><a href="global.html#validateSede">validateSede</a></li><li><a href="global.html#validateUnidadCurricular">validateUnidadCurricular</a></li><li><a href="global.html#validateUser">validateUser</a></li><li><a href="global.html">validationError</a></li><li><a href="global.html#verificarConexion">verificarConexion</a></li><li><a href="global.html#verificarConexionInternet">verificarConexionInternet</a></li><li><a href="global.html#verificarDependencias">verificarDependencias</a></li><li><a href="global.html#verificarEmailConAPI">verificarEmailConAPI</a></li><li><a href="global.html">verificarSesion</a></li><li><a href="global.html#verificarUsers">verificarUsers</a></li><li><a href="global.html#verificarYValidarEmails">verificarYValidarEmails</a></li></ul>
    
</nav>

<div id="main">
    
    <h1 class="page-title">services/profesor.service.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import ValidationService from "./validation.service.js";
import NotificationService from "./notification.service.js";
import ImagenService from "./imagen.service.js";
import EmailService from "./email.service.js";
import ProfesorModel from "../models/profesor.model.js";
import FormatterResponseService from "../utils/FormatterResponseService.js";
import { loadEnv, parseJSONField } from "../utils/utilis.js";
import { generarPassword, hashPassword } from "../utils/encrypted.js";

loadEnv();

/**
 * @class ProfesorService
 * @description Servicio para operaciones de negocio relacionadas con profesores
 */
export default class ProfesorService {
  static async registrarProfesor(datos, imagen, user_action) {
    const imagenService = new ImagenService("profesores");
    let imagenPath = null;

    try {
      console.log(
        "üîç [registrarProfesor] Iniciando registro de profesor...",
        datos.areas_de_conocimiento
      );
      const Pregrados = parseJSONField(datos.pre_grado, "Pre-Grados");
      const Posgrado = parseJSONField(datos.pos_grado, "Pos-Grados");
      const Areasconocimiento = parseJSONField(
        datos.areas_de_conocimiento,
        "Areas de conocimiento"
      );

      const datosProfesor = {
        ...datos,
        pre_grado: Pregrados,
        pos_grado: Posgrado,
        areas_de_conocimiento: Areasconocimiento,
        cedula: parseInt(datos.cedula),
      };

      console.log("‚úÖ Datos del profesor:", datosProfesor);

      // 1. Validar datos del profesor
      console.log("‚úÖ Validando datos del profesor...");
      const validation = ValidationService.validateProfesor(datosProfesor);

      if (!validation.isValid) {
        console.error("‚ùå Validaci√≥n de datos fallida:", validation.errors);
        return FormatterResponseService.validationError(
          validation.errors,
          "Error de validaci√≥n en registro de profesor"
        );
      }

      // 2. Validar ID de usuario
      console.log("‚úÖ Validando ID de usuario...");
      const idValidation = ValidationService.validateId(
        user_action.id,
        "usuario"
      );

      if (!idValidation.isValid) {
        console.error("‚ùå Validaci√≥n de ID fallida:", idValidation.errors);
        return FormatterResponseService.validationError(
          idValidation.errors,
          "ID de usuario inv√°lido"
        );
      }

      // 3. Validar imagen (solo si se proporciona)
      if (imagen &amp;&amp; imagen.originalname) {
        console.log("üñºÔ∏è Validando imagen...");
        const validationImage = await imagenService.validateImage(
          imagen.originalname,
          {
            maxWidth: 1920,
            maxHeight: 1080,
            maxSize: 5 * 1024 * 1024,
            quality: 85,
            format: "webp",
          }
        );

        if (!validationImage.isValid) {
          console.error(
            "‚ùå Validaci√≥n de imagen fallida:",
            validationImage.error
          );
          return FormatterResponseService.validationError(
            [{ path: "imagen", message: validationImage.error }],
            "Error de validaci√≥n de imagen"
          );
        }

        console.log("‚úÖ Imagen v√°lida:", validationImage.message);

        // Guardar imagen y obtener la ruta
        console.log("üíæ Procesando y guardando imagen...");
        imagenPath = await imagenService.processAndSaveImage(
          imagen.originalname,
          {
            maxWidth: 1920,
            maxHeight: 1080,
            quality: 85,
            format: "webp",
          }
        );

        if (process.env.MODE === "DEVELOPMENT") {
          console.log("üìÅ Ruta de imagen guardada:", imagenPath);
        }
      } else {
        console.log("‚ÑπÔ∏è No se proporcion√≥ imagen, continuando sin ella...");
      }

      // 4. Validar email
      console.log("üìß Validando email...");
      const emailService = new EmailService();
      const validationEmail = await emailService.verificarEmailConAPI(
        datos.email
      );

      if (!validationEmail.existe) {
        console.error("‚ùå Validaci√≥n de email fallida:", validationEmail);
        return FormatterResponseService.error(
          "El email proporcionado no es v√°lido o no existe",
          "Lo sentimos, el email proporcionado no es v√°lido o no existe",
          400,
          "INVALID_EMAIL",
          {
            email: datos.email,
          }
        );
      }

      const contrania = await generarPassword();
      console.log("üîê Contrase√±a generada:", contrania);
      const hash = await hashPassword(contrania);
      console.log("‚úÖ Contrase√±a hasheada");

      // 5. Crear profesor en el modelo
      console.log("üë®‚Äçüè´ Creando profesor en base de datos...");
      const respuestaModel = await ProfesorModel.crear(
        {
          ...datosProfesor,
          imagen: imagenPath ? imagenPath.fileName : null,
          password: hash,
        },
        user_action.id
      );

      if (FormatterResponseService.isError(respuestaModel)) {
        return respuestaModel;
      }

      if (process.env.MODE === "DEVELOPMENT") {
        console.log("üìä Respuesta del modelo:", respuestaModel);
      }

      const Correo = {
        asunto: "Bienvenido/a al Sistema Acad√©mico - Credenciales de Acceso",
        html: `
      &lt;div style="font-family: Arial, sans-serif; line-height: 1.6;">
        &lt;h2 style="color: #2c3e50;">¬°Bienvenido/a, ${datos.nombres}!&lt;/h2>
        &lt;p>Es un placer darle la bienvenida a nuestra plataforma acad√©mica como profesor.&lt;/p>
        &lt;p>Sus credenciales de acceso son:&lt;/p>
        &lt;div style="background-color: #f8f9fa; padding: 15px; border-left: 4px solid #3498db; margin: 15px 0;">
          &lt;p>&lt;strong>Usuario:&lt;/strong> ${datos.email}&lt;/p>
          &lt;p>&lt;strong>Contrase√±a temporal:&lt;/strong> ${contrania}&lt;/p>
        &lt;/div>
        &lt;p>&lt;strong>Instrucciones importantes:&lt;/strong>&lt;/p>
        &lt;ul>
          &lt;li>Cambie su contrase√±a despu√©s del primer acceso&lt;/li>
          &lt;li>Esta contrase√±a es temporal y de uso personal&lt;/li>
          &lt;li>Guarde esta informaci√≥n en un lugar seguro&lt;/li>
        &lt;/ul>
        &lt;p>Si tiene alguna duda, contacte al departamento de soporte t√©cnico.&lt;/p>
      &lt;/div>
      &lt;div style="display: flex; flex-direction: row; justify-content: center; align-items: center; width: 100%;">
            &lt;a href="${process.env.ORIGIN_FRONTEND}/inicio-sesion" style="display: inline-block; background-color: #1C75BA; color: white; 
                      padding: 10px 20px; text-decoration: none; border-radius: 5px; margin-bottom: 20px;">
                Acceder a la plataforma
            &lt;/a>
        &lt;/div>
      `,
      };

      const Resultado = await emailService.enviarEmail({
        Destinatario: datos.email,
        Correo: Correo,
        verificarEmail: false,
      });

      console.log("üìß Email enviado:", Resultado);

      // 6. Enviar notificaciones
      console.log("üîî Enviando notificaciones...");
      const notificationService = new NotificationService();

      // Notificaci√≥n individual para el profesor creado (solo √©l la ve)
      await notificationService.crearNotificacionIndividual({
        titulo: "Bienvenido al Sistema Acad√©mico",
        tipo: "profesor_registro_exitoso",
        user_id: datos.cedula,
        contenido: `¬°Bienvenido ${datos.nombres} ${datos.apellidos}! Su registro como profesor ha sido exitoso.`,
        metadatos: {
          profesor_cedula: respuestaModel.data.profesor.cedula,
          profesor_nombre: `${respuestaModel.data.profesor.nombres} ${respuestaModel.data.profesor.apellidos}`,
          fecha_registro: new Date().toISOString(),
          url_action: `/academico/profesores/${respuestaModel.data.profesor.id}`,
        },
      });

      // Notificaci√≥n masiva para roles administrativos (NO incluye profesores)
      await notificationService.crearNotificacionMasiva({
        titulo: "Nuevo Profesor Registrado",
        tipo: "profesor_creado",
        contenido: `Se ha registrado al profesor ${respuestaModel.data.profesor.nombres} ${respuestaModel.data.profesor.apellidos} en el sistema`,
        metadatos: {
          profesor_cedula: respuestaModel.data.profesor.cedula,
          profesor_nombre: `${respuestaModel.data.profesor.nombres} ${respuestaModel.data.profesor.apellidos}`,
          usuario_creador: user_action.id,
          fecha_registro: new Date().toISOString(),
          url_action: `/academico/profesores/${respuestaModel.data.profesor.id}`,
        },
        roles_ids: [2, 7, 8, 9, 10, 20], // Coordinador, Directores, Vicerrector√≠a, SuperAdmin
        users_ids: [user_action.id], // Solo el usuario que cre√≥
      });

      console.log("üéâ Profesor registrado exitosamente");

      return FormatterResponseService.success(
        {
          message: "Profesor creado exitosamente",
          profesor: {
            cedula: datos.cedula,
            nombres: datos.nombres,
            apellidos: datos.apellidos,
            email: datos.email,
            imagen: imagenPath,
          },
        },
        "Profesor registrado exitosamente",
        {
          status: 201,
          title: "Profesor Creado",
        }
      );
    } catch (error) {
      console.error("üí• Error en servicio crear profesor:", error);
      if (imagenPath != null) {
        imagenService.deleteImage(imagenPath.fileName);
      }
      throw error;
    }
  }

  /**
   * @static
   * @async
   * @method obtenerTodos
   * @description Obtener todos los profesores con validaci√≥n de par√°metros
   * @param {Object} queryParams - Par√°metros de consulta
   * @returns {Object} Resultado de la operaci√≥n
   */
  static async obtenerProfesores(queryParams = {}) {
    try {
      // Validar par√°metros de consulta
      const allowedParams = [
        "page",
        "limit",
        "sort_order",
        "search",
        "id_profesor",
      ];
      const queryValidation = ValidationService.validateQueryParams(
        queryParams,
        allowedParams
      );
      console.log("parametros de busqueda: ", queryParams);

      if (!queryValidation.isValid) {
        return FormatterResponseService.validationError(
          queryValidation.errors,
          "Error de validaci√≥n en par√°metros de consulta"
        );
      }

      // Llamar al MODELO (no a s√≠ mismo)
      const respuestaModel = await ProfesorModel.obtenerTodos(queryParams);

      // Verificar si es b√∫squeda por ID √∫nico
      if (queryParams.id_profesor &amp;&amp; respuestaModel.data.profesor) {
        // Es un solo profesor (b√∫squeda por ID)
        const profesorProcesado = {
          ...respuestaModel.data.profesor,
          areas_de_conocimiento: respuestaModel.data.profesor
            .areas_de_conocimiento
            ? JSON.parse(respuestaModel.data.profesor.areas_de_conocimiento)
            : [],
          disponibilidad: respuestaModel.data.profesor.disponibilidad
            ? JSON.parse(respuestaModel.data.profesor.disponibilidad)
            : [],
          pre_grados: respuestaModel.data.profesor.pre_grados
            ? JSON.parse(respuestaModel.data.profesor.pre_grados)
            : [],
          pos_grados: respuestaModel.data.profesor.pos_grados
            ? JSON.parse(respuestaModel.data.profesor.pos_grados)
            : [],
        };

        return FormatterResponseService.success(
          { profesor: profesorProcesado },
          "Profesor obtenido exitosamente",
          {
            status: 200,
            title: "Profesor Encontrado",
          }
        );
      }

      // Parsear los campos JSON en cada profesor (b√∫squeda m√∫ltiple)
      if (Array.isArray(respuestaModel.data.profesores)) {
        const profesoresProcesados = respuestaModel.data.profesores.map(
          (profesor) => ({
            ...profesor,
            areas_de_conocimiento: profesor.areas_de_conocimiento
              ? JSON.parse(profesor.areas_de_conocimiento)
              : [],
            disponibilidad: profesor.disponibilidad
              ? JSON.parse(profesor.disponibilidad)
              : [],
            pre_grados: profesor.pre_grados
              ? JSON.parse(profesor.pre_grados)
              : [],
            pos_grados: profesor.pos_grados
              ? JSON.parse(profesor.pos_grados)
              : [],
          })
        );
        respuestaModel.data.profesores = profesoresProcesados;
      }

      if (FormatterResponseService.isError(respuestaModel)) {
        return respuestaModel;
      }

      return FormatterResponseService.success(
        respuestaModel.data,
        "Profesores obtenidos exitosamente",
        {
          status: 200,
          title: "Lista de Profesores",
        }
      );
    } catch (error) {
      console.error("Error en servicio obtener todos los profesores:", error);
      throw error;
    }
  }

  /**
   * @static
   * @async
   * @method mostrarProfesoresEliminados
   * @description Obtener todos los profesores con validaci√≥n de par√°metros
   * @param {Object} queryParams - Par√°metros de consulta
   * @returns {Object} Resultado de la operaci√≥n
   */
  static async mostrarProfesoresEliminados(queryParams = {}) {
    try {
      // Validar par√°metros de consulta
      const allowedParams = ["page", "limit", "sort_order", "search"];
      const queryValidation = ValidationService.validateQueryParams(
        queryParams,
        allowedParams
      );

      if (!queryValidation.isValid) {
        return FormatterResponseService.validationError(
          queryValidation.errors,
          "Error de validaci√≥n en par√°metros de consulta"
        );
      }

      const respuestaModel = await ProfesorModel.mostrarProfesoresEliminados(
        queryParams
      );

      if (FormatterResponseService.isError(respuestaModel)) {
        return respuestaModel;
      }

      return FormatterResponseService.success(
        respuestaModel.data,
        "Profesores obtenidos exitosamente",
        {
          status: 200,
          title: "Lista de Profesores",
        }
      );
    } catch (error) {
      console.error("Error en servicio obtener todos los profesores:", error);
      throw error;
    }
  }

  /**
   * @static
   * @async
   * @method mostrarDisponibilidad
   * @description Obtener la disponibilidad de un profesor con validaci√≥n de par√°metros
   * @param {number|string} idProfesor - ID del profesor
   * @returns {Object} Resultado de la operaci√≥n
   */
  static async mostrarDisponibilidad(idProfesor) {
    try {
      // 1. Validar par√°metro de entrada
      if (!idProfesor) {
        return FormatterResponseService.validationError(
          ["El ID del profesor es requerido"],
          "Error en el par√°metro de entrada"
        );
      }

      // 2. Validar formato del ID (asumiendo que validateId retorna { isValid: boolean, errors: array })
      const validacion = ValidationService.validateId(
        idProfesor,
        "id de profesor"
      );

      // CORRECCI√ìN: La l√≥gica estaba invertida - si NO es v√°lido, debe retornar error
      if (!validacion.isValid) {
        return FormatterResponseService.validationError(
          validacion.errors,
          "Error en el ID del profesor"
        );
      }

      // 3. Obtener disponibilidad del modelo
      const respuestaModel = await ProfesorModel.mostrarDisponibilidad(
        idProfesor
      );

      // 4. Verificar si el modelo retorn√≥ un error
      if (FormatterResponseService.isError(respuestaModel)) {
        return respuestaModel;
      }

      // 5. Verificar si hay datos
      if (!respuestaModel.data || respuestaModel.data.length === 0) {
        return FormatterResponseService.success(
          { disponibilidades: [] },
          "No se encontr√≥ disponibilidad para el profesor",
          {
            status: 200,
            title: "Disponibilidad del Profesor",
          }
        );
      }

      // 6. Retornar √©xito con los datos
      return FormatterResponseService.success(
        {
          disponibilidades: respuestaModel.data,
        },
        "Disponibilidad obtenida exitosamente",
        {
          status: 200,
          title: "Disponibilidad del Profesor",
        }
      );
    } catch (error) {
      console.error("Error en servicio mostrarDisponibilidad:", error);

      // Retornar error controlado en lugar de lanzar excepci√≥n
      return FormatterResponseService.error(
        "Error interno al obtener la disponibilidad",
        {
          status: 500,
          title: "Error del Servidor",
          details: error.message,
        }
      );
    }
  }

  /**
   * @static
   * @async
   * @method obtenerConFiltros
   * @description Obtener profesores con filtros validados
   * @param {Object} filtros - Filtros de b√∫squeda
   * @returns {Object} Resultado de la operaci√≥n
   */
  static async obtenerConFiltros(filtros = {}) {
    try {
      // Validar estructura de filtros
      const filterValidation = ValidationService.validateQueryParams(filtros, [
        "dedicacion",
        "categoria",
        "ubicacion",
        "area",
        "fecha",
        "genero",
      ]);

      if (!filterValidation.isValid) {
        return FormatterResponseService.validationError(
          filterValidation.errors,
          "Error de validaci√≥n en filtros de b√∫squeda"
        );
      }

      const respuestaModel = await ProfesorModel.obtenerConFiltros(filtros);

      if (FormatterResponseService.isError(respuestaModel)) {
        return respuestaModel;
      }

      return FormatterResponseService.success(
        {
          profesores: respuestaModel.data,
          total: respuestaModel.data.length,
          filtros_aplicados: filtros,
        },
        "Profesores filtrados obtenidos exitosamente",
        {
          status: 200,
          title: "Profesores Filtrados",
        }
      );
    } catch (error) {
      console.error("Error en servicio obtener profesores con filtros:", error);
      throw error;
    }
  }

  static async obtenerImagenProfesor(id_profesor, queryParams = {}) {
    try {
      console.log(
        `üîç [obtenerImagenProfesor] Buscando imagen del profesor ID: ${id_profesor}`
      );
      console.log(queryParams);

      // Validar ID del profesor
      const idValidation = ValidationService.validateId(
        id_profesor,
        "profesor"
      );
      if (!idValidation.isValid) {
        return FormatterResponseService.validationError(
          idValidation.errors,
          "ID de profesor inv√°lido"
        );
      }

      // Buscar informaci√≥n del profesor
      const respuesta = await ProfesorModel.buscar(id_profesor.toString());

      if (FormatterResponseService.isError(respuesta)) {
        return respuesta;
      }

      if (!respuesta.data || respuesta.data.length === 0) {
        return FormatterResponseService.notFound("Profesor", id_profesor);
      }

      const profesor = respuesta.data[0];

      if (profesor.imagen === null) {
        throw FormatterResponseService.error(
          "Imagen no encontrada",
          "El profesor no tiene una imagen registrada en el sistema",
          404,
          "IMAGE_NOT_FOUND",
          { profesor_id: id_profesor }
        );
      }

      console.log(
        `‚úÖ Imagen encontrada para profesor ${profesor.nombres} ${profesor.apellidos}`
      );

      // Obtener la imagen usando el servicio de im√°genes
      const servicioImagen = new ImagenService("profesores");
      const imagen = await servicioImagen.getImage(
        profesor.imagen,
        queryParams
      );

      return FormatterResponseService.success(
        imagen,
        "Imagen del profesor obtenida exitosamente",
        {
          status: 200,
          title: "Imagen del Profesor",
          profesor: {
            id: id_profesor,
            nombre: `${profesor.nombres} ${profesor.apellidos}`,
            cedula: profesor.cedula,
          },
        }
      );
    } catch (error) {
      console.error("üí• Error en servicio obtener imagen del profesor:", error);
      throw error;
    }
  }

  /**
   * @static
   * @async
   * @method buscar
   * @description Buscar profesores con validaci√≥n de t√©rmino de b√∫squeda
   * @param {string} busqueda - T√©rmino de b√∫squeda
   * @returns {Object} Resultado de la operaci√≥n
   */
  static async buscar(busqueda) {
    try {
      // Validar t√©rmino de b√∫squeda
      if (
        !busqueda ||
        typeof busqueda !== "string" ||
        busqueda.trim().length === 0
      ) {
        return FormatterResponseService.validationError(
          [
            {
              path: "busqueda",
              message:
                "El t√©rmino de b√∫squeda es requerido y debe ser una cadena no vac√≠a",
            },
          ],
          "Error de validaci√≥n en b√∫squeda"
        );
      }

      const termino = busqueda.trim();

      if (termino.length &lt; 2) {
        return FormatterResponseService.validationError(
          [
            {
              path: "busqueda",
              message:
                "El t√©rmino de b√∫squeda debe tener al menos 2 caracteres",
            },
          ],
          "T√©rmino de b√∫squeda demasiado corto"
        );
      }

      const respuestaModel = await ProfesorModel.buscar(termino);

      if (FormatterResponseService.isError(respuestaModel)) {
        return respuestaModel;
      }

      return FormatterResponseService.success(
        {
          profesores: respuestaModel.data,
          total: respuestaModel.data.length,
          termino_busqueda: termino,
        },
        "B√∫squeda de profesores completada exitosamente",
        {
          status: 200,
          title: "Resultados de B√∫squeda",
        }
      );
    } catch (error) {
      console.error("Error en servicio buscar profesores:", error);
      throw error;
    }
  }

  /**
   * @static
   * @async
   * @method actualizar
   * @description Actualizar un profesor existente con validaci√≥n y notificaci√≥n
   * @param {Object} datos - Datos actualizados del profesor
   * @param {object} user_action - Usuario que realiza la acci√≥n
   * @returns {Object} Resultado de la operaci√≥n
   */
  static async actualizar(idProfesor, data, usuarioId) {
    console.log("üîß INICIANDO actualizar profesor");
    console.log("üë§ Usuario ID:", usuarioId);
    const datos = {
      ...data,
      id_profesor: parseInt(idProfesor),
    };
    console.log("üì• Datos recibidos:", datos.pos_grados);

    try {
      // Validar datos parciales del profesor
      console.log("üîç Validando datos parciales del profesor...");
      const validation = ValidationService.validatePartialProfesor({ datos });
      console.log("‚úÖ Resultado validaci√≥n parcial:", validation);

      if (!validation.isValid) {
        console.log("‚ùå Validaci√≥n parcial fallida:", validation.errors);
        return FormatterResponseService.validationError(
          validation.errors,
          "Error de validaci√≥n en actualizaci√≥n de profesor"
        );
      }

      // Validar que tenga ID de profesor
      console.log("üîç Validando campos requeridos...");
      const requiredValidation = ValidationService.validateRequiredFields(
        datos,
        ["id_profesor"]
      );
      console.log("‚úÖ Resultado validaci√≥n requeridos:", requiredValidation);

      if (!requiredValidation.isValid) {
        console.log(
          "‚ùå Validaci√≥n requeridos fallida:",
          requiredValidation.errors
        );
        return FormatterResponseService.validationError(
          requiredValidation.errors,
          "Campos requeridos faltantes"
        );
      }

      // Validar ID de usuario
      console.log("üîç Validando ID de usuario...");
      const idValidation = ValidationService.validateId(usuarioId, "usuario");
      console.log("‚úÖ Resultado validaci√≥n ID usuario:", idValidation);

      if (!idValidation.isValid) {
        console.log("‚ùå Validaci√≥n ID usuario fallida:", idValidation.errors);
        return FormatterResponseService.validationError(
          idValidation.errors,
          "ID de usuario inv√°lido"
        );
      }

      // Actualizar profesor
      console.log("üîÑ Iniciando actualizaci√≥n en el modelo...");
      const respuestaModel = await ProfesorModel.actualizar(datos, usuarioId);
      console.log("‚úÖ Respuesta del modelo:", respuestaModel);

      if (FormatterResponseService.isError(respuestaModel)) {
        console.log("‚ùå Error en el modelo:", respuestaModel);
        return respuestaModel;
      }

      // Enviar notificaciones de actualizaci√≥n
      console.log("üì¢ Creando notificaciones...");
      const notificationService = new NotificationService();

      const camposActualizados = Object.keys(datos).filter(
        (key) => key !== "id_profesor"
      );
      console.log("üìù Campos actualizados:", camposActualizados);

      // Notificaci√≥n individual para el profesor afectado
      await notificationService.crearNotificacionIndividual({
        titulo: "Sus Datos Han Sido Actualizados",
        tipo: "profesor_actualizado_propio",
        user_id: datos.cedula || idProfesor,
        contenido: `Se han actualizado sus datos personales en el sistema. Campos modificados: ${camposActualizados.join(
          ", "
        )}`,
        metadatos: {
          profesor_id: datos.id_profesor,
          campos_actualizados: camposActualizados,
          usuario_actualizador: usuarioId,
          fecha_actualizacion: new Date().toISOString(),
          url_action: `/academico/profesores/${datos.id_profesor}`,
        },
      });

      // Notificaci√≥n masiva para roles administrativos
      await notificationService.crearNotificacionMasiva({
        titulo: "Profesor Actualizado",
        tipo: "profesor_actualizado",
        contenido: `Se han actualizado los datos del profesor ${datos.nombres} ${datos.apellidos}`,
        metadatos: {
          profesor_id: datos.id_profesor,
          profesor_nombre: `${datos.nombres} ${datos.apellidos}`,
          campos_actualizados: camposActualizados,
          usuario_actualizador: usuarioId,
          fecha_actualizacion: new Date().toISOString(),
          url_action: `/academico/profesores/${datos.id_profesor}`,
        },
        roles_ids: [2, 7, 8, 9, 10, 20], // Coordinador, Directores, Vicerrector√≠a, SuperAdmin
        users_ids: [usuarioId],
      });

      console.log("‚úÖ Notificaciones creadas exitosamente");

      const respuestaFinal = FormatterResponseService.success(
        {
          message: "Profesor actualizado exitosamente",
          profesor_id: datos.id_profesor,
        },
        "Profesor actualizado exitosamente",
        {
          status: 200,
          title: "Profesor Actualizado",
        }
      );

      console.log("üéâ Actualizaci√≥n completada exitosamente:", respuestaFinal);
      return respuestaFinal;
    } catch (error) {
      console.error("üí• ERROR CR√çTICO en servicio actualizar profesor:", error);
      console.error("üìå Stack trace:", error.stack);
      console.error("üìä Datos que causaron el error:", { datos, usuarioId });
      throw error;
    }
  }

  /**
   * @static
   * @async
   * @method eliminar
   * @description Eliminar/destituir un profesor con validaci√≥n y notificaci√≥n
   * @param {Object} datos - Datos de la eliminaci√≥n
   * @param {object} user_action - Usuario que realiza la acci√≥n
   * @returns {Object} Resultado de la operaci√≥n
   */
  static async destituirProfesor(datos, user_action) {
    try {
      // Validar datos de eliminaci√≥n
      const requiredValidation = ValidationService.validateRequiredFields(
        datos,
        ["id_profesor", "tipo_accion", "razon"]
      );

      if (!requiredValidation.isValid) {
        return FormatterResponseService.validationError(
          requiredValidation.errors,
          "Campos requeridos faltantes para eliminaci√≥n"
        );
      }

      // Validar ID de usuario
      const idValidation = ValidationService.validateId(
        user_action.id,
        "usuario"
      );
      if (!idValidation.isValid) {
        return FormatterResponseService.validationError(
          idValidation.errors,
          "ID de usuario inv√°lido"
        );
      }

      // Validar ID de profesor
      const profesorIdValidation = ValidationService.validateId(
        datos.id_profesor,
        "profesor"
      );
      if (!profesorIdValidation.isValid) {
        return FormatterResponseService.validationError(
          profesorIdValidation.errors,
          "ID de profesor inv√°lido"
        );
      }

      // Verificar que el profesor existe
      const profesores = await ProfesorModel.obtenerTodos({
        search: datos.id_profesor,
      });
      const profesor = profesores.data.profesores.find(
        (profe) => profe.id_profesor === datos.id_profesor
      );

      if (!profesor) {
        return FormatterResponseService.notFound("Profesor", datos.id_profesor);
      }

      // Eliminar profesor
      const respuestaModel = await ProfesorModel.eliminar(
        datos,
        user_action.id
      );

      if (FormatterResponseService.isError(respuestaModel)) {
        return respuestaModel;
      }

      // Enviar notificaciones de eliminaci√≥n/destituci√≥n
      const notificationService = new NotificationService();

      const accionTipo =
        datos.tipo_accion === "eliminar" ? "Eliminado" : "Destituido";
      const accionContenido =
        datos.tipo_accion === "eliminar" ? "eliminado" : "destituido";

      // Notificaci√≥n individual para el profesor afectado
      await notificationService.crearNotificacionIndividual({
        titulo: `Usted Ha Sido ${accionTipo}`,
        tipo: `profesor_${datos.tipo_accion}_propio`,
        user_id: profesor.cedula,
        contenido: `Usted ha sido ${accionContenido} del sistema. Raz√≥n: ${datos.razon}`,
        metadatos: {
          profesor_id: datos.id_profesor,
          tipo_accion: datos.tipo_accion,
          razon: datos.razon,
          observaciones: datos.observaciones,
          fecha_efectiva: datos.fecha_efectiva,
          usuario_ejecutor: user_action.id,
          fecha_ejecucion: new Date().toISOString(),
        },
      });

      // Notificaci√≥n masiva para roles administrativos
      await notificationService.crearNotificacionMasiva({
        titulo: `Profesor ${accionTipo}`,
        tipo: `profesor_${datos.tipo_accion}`,
        contenido: `Se ha ${accionContenido} al profesor ${profesor.nombres} ${profesor.apellidos} (${profesor.cedula})`,
        metadatos: {
          profesor_id: datos.id_profesor,
          profesor_cedula: profesor.cedula,
          profesor_nombre: `${profesor.nombres} ${profesor.apellidos}`,
          tipo_accion: datos.tipo_accion,
          razon: datos.razon,
          observaciones: datos.observaciones,
          fecha_efectiva: datos.fecha_efectiva,
          usuario_ejecutor: user_action.id,
          fecha_ejecucion: new Date().toISOString(),
        },
        roles_ids: [2, 7, 8, 9, 10, 20], // Coordinador, Directores, Vicerrector√≠a, SuperAdmin
        users_ids: [user_action.id],
      });

      return FormatterResponseService.success(
        {
          message: `Profesor ${
            datos.tipo_accion === "eliminar" ? "eliminado" : "destituido"
          } exitosamente`,
          profesor: {
            id: datos.id_profesor,
            cedula: profesor.cedula,
            nombre: `${profesor.nombres} ${profesor.apellidos}`,
            accion: datos.tipo_accion,
          },
        },
        `Profesor ${
          datos.tipo_accion === "eliminar" ? "eliminado" : "destituido"
        } exitosamente`,
        {
          status: 200,
          title: `Profesor ${accionTipo}`,
        }
      );
    } catch (error) {
      console.error("Error en servicio eliminar profesor:", error);
      throw error;
    }
  }

  /**
   * @static
   * @async
   * @method reingresoProfesor
   * @description Reingresar/habilitar un profesor con validaci√≥n y notificaci√≥n
   * @param {Object} datos - Datos del reingreso
   * @param {object} user_action - Usuario que realiza la acci√≥n
   * @returns {Object} Resultado de la operaci√≥n
   */
  static async reingresoProfesor(datos, user_action) {
    try {
      // Validar datos de reingreso
      const requiredValidation = ValidationService.validateRequiredFields(
        datos,
        ["id_usuario", "tipo_reingreso", "motivo_reingreso"]
      );

      if (!requiredValidation.isValid) {
        return FormatterResponseService.validationError(
          requiredValidation.errors,
          "Campos requeridos faltantes para reingreso"
        );
      }

      // Validar ID de usuario
      const idValidation = ValidationService.validateId(
        user_action.id,
        "usuario"
      );
      if (!idValidation.isValid) {
        return FormatterResponseService.validationError(
          idValidation.errors,
          "ID de usuario inv√°lido"
        );
      }

      // Validar ID de profesor
      const profesorIdValidation = ValidationService.validateId(
        datos.id_usuario,
        "profesor"
      );
      if (!profesorIdValidation.isValid) {
        return FormatterResponseService.validationError(
          profesorIdValidation.errors,
          "ID de profesor inv√°lido"
        );
      }

      // Verificar que el profesor existe y est√° inactivo
      const profesores = await ProfesorModel.mostrarProfesoresEliminados({
        id_profesor: datos.id_usuario,
      });
      const profesor = profesores.data.profesor;
      if (!profesor) {
        return FormatterResponseService.notFound("Profesor", datos.id_usuario);
      }

      // Verificar que el profesor est√° inactivo
      if (profesor.activo) {
        return FormatterResponseService.badRequest(
          "El profesor ya se encuentra activo en el sistema"
        );
      }

      // Reingresar profesor
      const respuestaModel = await ProfesorModel.reingresar(
        datos,
        user_action.id
      );

      if (FormatterResponseService.isError(respuestaModel)) {
        return respuestaModel;
      }

      // Enviar notificaciones de reingreso
      const notificationService = new NotificationService();

      const tipoReingresoMap = {
        REINGRESO: "Reingresado",
        REINCORPORACION: "Reincorporado",
        REINTEGRO: "Reintegrado",
      };

      const accionTipo =
        tipoReingresoMap[datos.tipo_reingreso] || "Reingresado";
      const accionContenido = datos.tipo_reingreso.toLowerCase();

      // Notificaci√≥n individual para el profesor afectado
      await notificationService.crearNotificacionIndividual({
        titulo: `Usted Ha Sido ${accionTipo}`,
        tipo: `profesor_reingreso_propio`,
        user_id: profesor.cedula,
        contenido: `Usted ha sido ${accionContenido} en el sistema. Motivo: ${datos.motivo_reingreso}`,
        metadatos: {
          profesor_id: datos.id_usuario,
          tipo_reingreso: datos.tipo_reingreso,
          motivo_reingreso: datos.motivo_reingreso,
          observaciones: datos.observaciones,
          fecha_efectiva: datos.fecha_efectiva,
          registro_anterior_id: datos.registro_anterior_id,
          usuario_solicitante: user_action.id,
          fecha_reingreso: new Date().toISOString(),
        },
      });

      // Notificaci√≥n masiva para roles administrativos
      await notificationService.crearNotificacionMasiva({
        titulo: `Profesor ${accionTipo}`,
        tipo: `profesor_reingreso`,
        contenido: `Se ha ${accionContenido} al profesor ${profesor.nombres} ${profesor.apellidos} (${profesor.cedula})`,
        metadatos: {
          profesor_id: datos.id_usuario,
          profesor_cedula: profesor.cedula,
          profesor_nombre: `${profesor.nombres} ${profesor.apellidos}`,
          tipo_reingreso: datos.tipo_reingreso,
          motivo_reingreso: datos.motivo_reingreso,
          observaciones: datos.observaciones,
          fecha_efectiva: datos.fecha_efectiva,
          registro_anterior_id: datos.registro_anterior_id,
          usuario_solicitante: user_action.id,
          fecha_reingreso: new Date().toISOString(),
        },
        roles_ids: [2, 7, 8, 9, 10, 20], // Coordinador, Directores, Vicerrector√≠a, SuperAdmin
        users_ids: [user_action.id],
      });

      return FormatterResponseService.success(
        {
          message: `Profesor ${accionContenido} exitosamente`,
          profesor: {
            id: datos.id_profesor,
            cedula: profesor.cedula,
            nombre: `${profesor.nombres} ${profesor.apellidos}`,
            accion: datos.tipo_reingreso,
            activo: true,
          },
        },
        `Profesor ${accionContenido} exitosamente`,
        {
          status: 200,
          title: `Profesor ${accionTipo}`,
        }
      );
    } catch (error) {
      console.error("Error en servicio reingresar profesor:", error);
      throw error;
    }
  }

  /**
   * @static
   * @async
   * @method obtenerPregrados
   * @description Obtener todos los pregrados con validaci√≥n
   * @returns {Object} Resultado de la operaci√≥n
   */
  static async obtenerPregrados() {
    try {
      const respuestaModel = await ProfesorModel.obtenerPregrados();

      if (FormatterResponseService.isError(respuestaModel)) {
        return respuestaModel;
      }

      return FormatterResponseService.success(
        respuestaModel.data,
        "Pregrados obtenidos exitosamente",
        {
          status: 200,
          title: "Lista de Pregrados",
        }
      );
    } catch (error) {
      console.error("Error en servicio obtener pregrados:", error);
      throw error;
    }
  }

  /**
   * @static
   * @async
   * @method obtenerPosgrados
   * @description Obtener todos los posgrados con validaci√≥n
   * @returns {Object} Resultado de la operaci√≥n
   */
  static async obtenerPosgrados() {
    try {
      const respuestaModel = await ProfesorModel.obtenerPosgrados();

      if (FormatterResponseService.isError(respuestaModel)) {
        return respuestaModel;
      }

      return FormatterResponseService.success(
        respuestaModel.data,
        "Posgrados obtenidos exitosamente",
        {
          status: 200,
          title: "Lista de Posgrados",
        }
      );
    } catch (error) {
      console.error("Error en servicio obtener posgrados:", error);
      throw error;
    }
  }

  /**
   * @static
   * @async
   * @method obtenerAreasConocimiento
   * @description Obtener todas las √°reas de conocimiento con validaci√≥n
   * @returns {Object} Resultado de la operaci√≥n
   */
  static async obtenerAreasConocimiento() {
    try {
      const respuestaModel = await ProfesorModel.obtenerAreasConocimiento();

      if (FormatterResponseService.isError(respuestaModel)) {
        return respuestaModel;
      }

      return FormatterResponseService.success(
        {
          areas_conocimiento: respuestaModel.data,
          total: respuestaModel.data.length,
        },
        "√Åreas de conocimiento obtenidas exitosamente",
        {
          status: 200,
          title: "Lista de √Åreas de Conocimiento",
        }
      );
    } catch (error) {
      console.error("Error en servicio obtener √°reas de conocimiento:", error);
      throw error;
    }
  }

  /**
   * @static
   * @async
   * @method crearPregrado
   * @description Crear un nuevo pregrado
   * @param {Object} datos - Datos del pregrado
   * @param {string} datos.nombre - Nombre del pregrado
   * @param {string} datos.tipo - Tipo del pregrado
   * @param {object} user_action - Usuario que realiza la acci√≥n
   * @param {number} user_action.id - ID del usuario
   * @returns {Promise&lt;Object>} Resultado de la operaci√≥n
   */
  static async crearPregrado(datos, user_action) {
    try {
      console.log("üîç [crearPregrado] Iniciando creaci√≥n de pregrado...");

      // Validar datos del pregrado usando el nuevo m√©todo
      const validation = ValidationService.validateNuevoPregrado(datos);
      if (!validation.isValid) {
        return FormatterResponseService.validationError(
          validation.errors,
          "Error de validaci√≥n en creaci√≥n de pregrado"
        );
      }

      // Validar ID de usuario
      const idValidation = ValidationService.validateId(
        user_action.id,
        "usuario"
      );
      if (!idValidation.isValid) {
        return FormatterResponseService.validationError(
          idValidation.errors,
          "ID de usuario inv√°lido"
        );
      }

      const respuestaModel = await ProfesorModel.crearPregrado(
        datos,
        user_action.id
      );

      if (FormatterResponseService.isError(respuestaModel)) {
        return respuestaModel;
      }

      console.log("üéâ Pregrado creado exitosamente");

      return FormatterResponseService.success(
        {
          message: "Pregrado creado exitosamente",
          pregrado: {
            nombre: datos.nombre,
            tipo: datos.tipo,
          },
        },
        "Pregrado creado exitosamente",
        {
          status: 201,
          title: "Pregrado Creado",
        }
      );
    } catch (error) {
      console.error("üí• Error en servicio crear pregrado:", error);
      throw error;
    }
  }

  /**
   * @static
   * @async
   * @method crearPosgrado
   * @description Crear un nuevo posgrado
   * @param {Object} datos - Datos del posgrado
   * @param {string} datos.nombre - Nombre del posgrado
   * @param {string} datos.tipo - Tipo del posgrado
   * @param {object} user_action - Usuario que realiza la acci√≥n
   * @param {number} user_action.id - ID del usuario
   * @returns {Promise&lt;Object>} Resultado de la operaci√≥n
   */
  static async crearPosgrado(datos, user_action) {
    try {
      console.log("üîç [crearPosgrado] Iniciando creaci√≥n de posgrado...");

      // Validar datos del posgrado usando el nuevo m√©todo
      const validation = ValidationService.validateNuevoPosgrado(datos);
      if (!validation.isValid) {
        return FormatterResponseService.validationError(
          validation.errors,
          "Error de validaci√≥n en creaci√≥n de posgrado"
        );
      }

      // Validar ID de usuario
      const idValidation = ValidationService.validateId(
        user_action.id,
        "usuario"
      );
      if (!idValidation.isValid) {
        return FormatterResponseService.validationError(
          idValidation.errors,
          "ID de usuario inv√°lido"
        );
      }

      const respuestaModel = await ProfesorModel.crearPosgrado(
        datos,
        user_action.id
      );

      if (FormatterResponseService.isError(respuestaModel)) {
        return respuestaModel;
      }

      console.log("üéâ Posgrado creado exitosamente");

      return FormatterResponseService.success(
        {
          message: "Posgrado creado exitosamente",
          posgrado: {
            nombre: datos.nombre,
            tipo: datos.tipo,
          },
        },
        "Posgrado creado exitosamente",
        {
          status: 201,
          title: "Posgrado Creado",
        }
      );
    } catch (error) {
      console.error("üí• Error en servicio crear posgrado:", error);
      throw error;
    }
  }

  /**
   * @static
   * @async
   * @method crearAreaConocimiento
   * @description Crear una nueva √°rea de conocimiento
   * @param {Object} datos - Datos del √°rea de conocimiento
   * @param {string} datos.area_conocimiento - Nombre del √°rea de conocimiento
   * @param {object} user_action - Usuario que realiza la acci√≥n
   * @param {number} user_action.id - ID del usuario
   * @returns {Promise&lt;Object>} Resultado de la operaci√≥n
   */
  static async crearAreaConocimiento(datos, user_action) {
    try {
      console.log(
        "üîç [crearAreaConocimiento] Iniciando creaci√≥n de √°rea de conocimiento..."
      );

      // Validar datos del √°rea de conocimiento usando el nuevo m√©todo
      const validation = ValidationService.validateNuevaAreaConocimiento(datos);
      if (!validation.isValid) {
        return FormatterResponseService.validationError(
          validation.errors,
          "Error de validaci√≥n en creaci√≥n de √°rea de conocimiento"
        );
      }

      // Validar ID de usuario
      const idValidation = ValidationService.validateId(
        user_action.id,
        "usuario"
      );
      if (!idValidation.isValid) {
        return FormatterResponseService.validationError(
          idValidation.errors,
          "ID de usuario inv√°lido"
        );
      }

      const respuestaModel = await ProfesorModel.crearAreaConocimiento(
        datos,
        user_action.id
      );

      if (FormatterResponseService.isError(respuestaModel)) {
        return respuestaModel;
      }

      console.log("üéâ √Årea de conocimiento creada exitosamente");

      return FormatterResponseService.success(
        {
          message: "√Årea de conocimiento creada exitosamente",
          area_conocimiento: {
            nombre: datos.area_conocimiento,
          },
        },
        "√Årea de conocimiento creada exitosamente",
        {
          status: 201,
          title: "√Årea de Conocimiento Creada",
        }
      );
    } catch (error) {
      console.error("üí• Error en servicio crear √°rea de conocimiento:", error);
      throw error;
    }
  }

  /**
   * @static
   * @async
   * @method crearDisponibilidad
   * @description Crear una nueva disponibilidad docente
   * @param {number} id_profesor - ID del profesor
   * @param {Object} datos - Datos de la disponibilidad
   * @param {object} user_action - Usuario que realiza la acci√≥n
   * @returns {Promise&lt;Object>} Resultado de la operaci√≥n
   */
  static async crearDisponibilidad(id_profesor, datos, user_action) {
    try {
      console.log(
        "üîç [crearDisponibilidad] Iniciando creaci√≥n de disponibilidad..."
      );
      console.log("ID Profesor:", id_profesor, "Datos:", datos);

      // Validar ID del profesor
      const idProfesorValidation = ValidationService.validateId(
        id_profesor,
        "profesor"
      );
      if (!idProfesorValidation.isValid) {
        return FormatterResponseService.validationError(
          idProfesorValidation.errors,
          "ID de profesor inv√°lido"
        );
      }

      // Validar datos de disponibilidad
      const validation =
        ValidationService.validatePartialDisponibilidadDocente(datos);
      if (!validation.isValid) {
        return FormatterResponseService.validationError(
          validation.errors,
          "Error de validaci√≥n en creaci√≥n de disponibilidad"
        );
      }

      // Validar ID de usuario
      const idUsuarioValidation = ValidationService.validateId(
        user_action.id,
        "usuario"
      );
      if (!idUsuarioValidation.isValid) {
        return FormatterResponseService.validationError(
          idUsuarioValidation.errors,
          "ID de usuario inv√°lido"
        );
      }

      const respuestaModel = await ProfesorModel.crearDisponibilidad(
        id_profesor,
        datos,
        user_action.id
      );

      if (FormatterResponseService.isError(respuestaModel)) {
        return respuestaModel;
      }

      console.log("üéâ Disponibilidad creada exitosamente");

      return FormatterResponseService.success(
        {
          message: "Disponibilidad creada exitosamente",
          disponibilidad: respuestaModel.data,
        },
        "Disponibilidad creada exitosamente",
        {
          status: 201,
          title: "Disponibilidad Creada",
        }
      );
    } catch (error) {
      console.error("üí• Error en servicio crear disponibilidad:", error);
      throw error;
    }
  }

  /**
   * @static
   * @async
   * @method actualizarDisponibilidad
   * @description Actualizar una disponibilidad docente existente
   * @param {number} id_profesor - ID del profesor
   * @param {Object} datos - Datos de la disponibilidad (debe incluir id_disponibilidad)
   * @param {object} user_action - Usuario que realiza la acci√≥n
   * @returns {Promise&lt;Object>} Resultado de la operaci√≥n
   */
  static async actualizarDisponibilidad(id_profesor, datos, user_action) {
    try {
      console.log(
        "üîç [actualizarDisponibilidad] Iniciando actualizaci√≥n de disponibilidad..."
      );
      console.log("ID Profesor:", id_profesor, "Datos:", datos);

      // Validar que tenga id_disponibilidad para actualizar
      if (!datos.id_disponibilidad) {
        return FormatterResponseService.validationError(
          ["El campo id_disponibilidad es requerido para actualizar"],
          "ID de disponibilidad requerido"
        );
      }

      // Validar ID del profesor
      const idProfesorValidation = ValidationService.validateId(
        id_profesor,
        "profesor"
      );
      if (!idProfesorValidation.isValid) {
        return FormatterResponseService.validationError(
          idProfesorValidation.errors,
          "ID de profesor inv√°lido"
        );
      }

      // Validar datos de disponibilidad
      const validation =
        ValidationService.validatePartialDisponibilidadDocente(datos);
      if (!validation.isValid) {
        return FormatterResponseService.validationError(
          validation.errors,
          "Error de validaci√≥n en actualizaci√≥n de disponibilidad"
        );
      }

      // Validar ID de usuario
      const idUsuarioValidation = ValidationService.validateId(
        user_action.id,
        "usuario"
      );
      if (!idUsuarioValidation.isValid) {
        return FormatterResponseService.validationError(
          idUsuarioValidation.errors,
          "ID de usuario inv√°lido"
        );
      }

      const respuestaModel = await ProfesorModel.actualizarDisponibilidad(
        datos.id_disponibilidad,
        datos,
        user_action.id
      );

      if (FormatterResponseService.isError(respuestaModel)) {
        return respuestaModel;
      }

      console.log("üéâ Disponibilidad actualizada exitosamente");

      return FormatterResponseService.success(
        {
          message: "Disponibilidad actualizada exitosamente",
          disponibilidad: respuestaModel.data,
        },
        "Disponibilidad actualizada exitosamente",
        {
          status: 200,
          title: "Disponibilidad Actualizada",
        }
      );
    } catch (error) {
      console.error("üí• Error en servicio actualizar disponibilidad:", error);
      throw error;
    }
  }

  /**
   * @static
   * @async
   * @method eliminarDisponibilidad
   * @description Eliminar una disponibilidad docente
   * @param {number} id_profesor - ID del profesor
   * @param {number} id_disponibilidad - ID de la disponibilidad a eliminar
   * @param {object} user_action - Usuario que realiza la acci√≥n
   * @returns {Promise&lt;Object>} Resultado de la operaci√≥n
   */
  static async eliminarDisponibilidad(
    id_profesor,
    id_disponibilidad,
    user_action
  ) {
    try {
      console.log(
        "üîç [eliminarDisponibilidad] Iniciando eliminaci√≥n de disponibilidad..."
      );
      console.log(
        "ID Profesor:",
        id_profesor,
        "ID Disponibilidad:",
        id_disponibilidad
      );

      // Validar IDs
      const idProfesorValidation = ValidationService.validateId(
        id_profesor,
        "profesor"
      );
      const idDisponibilidadValidation = ValidationService.validateId(
        id_disponibilidad,
        "disponibilidad"
      );
      const idUsuarioValidation = ValidationService.validateId(
        user_action.id,
        "usuario"
      );

      if (
        !idProfesorValidation.isValid ||
        !idDisponibilidadValidation.isValid ||
        !idUsuarioValidation.isValid
      ) {
        const errors = [
          ...idProfesorValidation.errors,
          ...idDisponibilidadValidation.errors,
          ...idUsuarioValidation.errors,
        ];
        return FormatterResponseService.validationError(
          errors,
          "IDs inv√°lidos en eliminaci√≥n de disponibilidad"
        );
      }

      const respuestaModel = await ProfesorModel.eliminarDisponibilidad(
        id_disponibilidad,
        user_action.id
      );

      if (FormatterResponseService.isError(respuestaModel)) {
        return respuestaModel;
      }

      console.log("üóëÔ∏è Disponibilidad eliminada exitosamente");

      return FormatterResponseService.success(
        {
          message: "Disponibilidad eliminada exitosamente",
        },
        "Disponibilidad eliminada exitosamente",
        {
          status: 200,
          title: "Disponibilidad Eliminada",
        }
      );
    } catch (error) {
      console.error("üí• Error en servicio eliminar disponibilidad:", error);
      throw error;
    }
  }
}
</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 4.0.4</a> on Thu Dec 04 2025 12:35:39 GMT-0400 (hora de Venezuela) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>



</body>
</html>
